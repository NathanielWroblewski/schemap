#!/usr/bin/env ruby

require 'yaml'
require 'json'

serialized_schema = `ruby #{File.dirname(__FILE__)}/../lib/schemap.rb`
schema = YAML.load(serialized_schema)

html = File.expand_path('../../lib/schemap/schemap.html', __FILE__)
File.open(html, 'a') do |file|
  file << "<script>window._schemap = #{schema.to_json};viz()</script>"
end

`open #{html}`
